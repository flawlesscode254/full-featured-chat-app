(this["webpackJsonpmessenger-clone"]=this["webpackJsonpmessenger-clone"]||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(5),s=n(2),c=n.n(s),i=n(18),o=n.n(i),r=(n(63),n(22)),l=n(95),u=n(98),d=n(96),m=(n(64),n(99)),g=n(93),j=n(94),p=(n(65),Object(s.forwardRef)((function(e,t){var n=e.message,s=e.username,c=e.vims,i=e.new_time,o=s===n.username;return Object(a.jsxs)("div",{ref:t,className:"message ".concat(o&&"message__user"),children:[Object(a.jsx)("p",{className:"message__name",children:!o&&"".concat(n.username||"Unknown User")}),Object(a.jsx)(m.a,{className:o?"message__userCard":"message__guestCard",children:Object(a.jsxs)(g.a,{children:[Object(a.jsx)(j.a,{color:"white",variant:"h5",component:"h2",children:n.message}),""===c.vims?Object(a.jsx)("input",{type:"text",hidden:!0}):Object(a.jsx)("img",{className:"new__vim",src:c.vims,alt:""}),Object(a.jsx)("p",{className:o?"teller_user":"teller_guest",children:i.new_time}),Object(a.jsx)("p",{})]})})]})}))),f=n(20),b=n(53),O=n(39),h=n.n(O),y=n(97),v=n.p+"static/media/note.b5001cf6.mp3",x=n(52),_=n.n(x),E=(n(72),n(73),n(74),n(51));f.a.initializeApp({apiKey:"AIzaSyCkmvDNXY-qPXyFuFsfEqDUNtLfQ1Ww764",authDomain:"messenger-clone-94aa1.firebaseapp.com",projectId:"messenger-clone-94aa1",storageBucket:"messenger-clone-94aa1.appspot.com",messagingSenderId:"552364157176",appId:"1:552364157176:web:c93350194f54836029730d",measurementId:"G-TN730N5Y1R"});var w=f.a.auth(),N=f.a.firestore(),I=f.a.storage();function T(){return Object(a.jsx)("div",{className:"signed",children:Object(a.jsx)(l.a,{variant:"contained",color:"primary",className:"sign-in",onClick:function(){var e=new f.a.auth.GoogleAuthProvider;w.signInWithPopup(e)},children:"Sign in with Google"})})}function B(){return w.currentUser&&Object(a.jsx)(l.a,{variant:"outlined",style:{marginTop:"10px"},color:"primary",className:"sign-out",onClick:function(){return w.signOut()},children:"Sign Out"})}function M(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)([]),o=Object(r.a)(i,2),m=o[0],g=o[1],j=Object(s.useState)(""),O=Object(r.a)(j,2),x=O[0],E=O[1],w=Object(s.useState)(null),T=Object(r.a)(w,2),B=T[0],M=T[1],C=Object(s.useState)(0),D=Object(r.a)(C,2),k=D[0],L=D[1];f.a.auth().onAuthStateChanged((function(e){e&&(document.getElementById("name_user").innerHTML=e.displayName,document.getElementById("mew").src=e.photoURL)})),Object(s.useEffect)((function(){N.collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){g(e.docs.map((function(e){return{id:e.id,vims:e.data(),message:e.data(),new_time:e.data()}})))}))}),[]);var S=new Audio(v);Object(s.useEffect)((function(){S.play()}),[m]),Object(s.useEffect)((function(){E(document.getElementById("name_user").innerHTML)}),[]),Object(s.useEffect)((function(){var e=document.getElementById("name_user").innerHTML;if("Duncan Kipkemoi"===e)N.collection("online").doc("Easy Way Out Coding").onSnapshot((function(e){var t=e.data();"Online"===t.status?document.getElementById("long").innerHTML="Easy Way Out Coding is "+t.status:document.getElementById("long").innerHTML="Last seen "+t.status}));else if("Easy Way Out Coding"===e){N.collection("online").doc("Duncan Kipkemoi").onSnapshot((function(e){var t=e.data();"Online"===t.status?document.getElementById("long").innerHTML="Duncan Kipkemoi is "+t.status:document.getElementById("long").innerHTML="Last seen "+t.status}))}}),[m]),Object(s.useEffect)((function(){var e=document.getElementById("name_user").innerHTML;if("Duncan Kipkemoi"===e)N.collection("typing").doc("Easy Way Out Coding").onSnapshot((function(e){var t=e.data();"Typing"===t.state?document.getElementById("good").innerHTML="Easy Way Out Coding is "+t.state+"....":document.getElementById("good").innerHTML=t.state}));else if("Easy Way Out Coding"===e){N.collection("typing").doc("Duncan Kipkemoi").onSnapshot((function(e){var t=e.data();"Typing"===t.state?document.getElementById("good").innerHTML="Duncan Kipkemoi "+t.state+"....":document.getElementById("good").innerHTML=t.state}))}}),[m]);var H=null;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("p",{id:"good"}),Object(a.jsx)("p",{id:"long"}),Object(a.jsxs)("div",{className:"titles",children:[Object(a.jsx)("img",{src:"",alt:"user",id:"mew"}),Object(a.jsx)("p",{id:"name_user"}),Object(a.jsx)("h1",{className:"title_head",children:"D M"}),Object(a.jsx)("img",{src:"https://i.pinimg.com/originals/a8/d7/dc/a8d7dc6b29f48fe6b5201469fee2c452.gif",alt:"network",id:"remind"})]}),Object(a.jsxs)("div",{className:"changers",children:[Object(a.jsx)(l.a,{variant:"outlined",color:"purple",onClick:function(){N.collection("online").doc(x).update({status:"Online"}),document.getElementById("remind").style.opacity=1},children:"Go Online"}),Object(a.jsx)(l.a,{variant:"contained",color:"purple",onClick:function(){var e=function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"pm":"am",s=(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a;return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+"  "+s}(new Date);N.collection("online").doc(x).update({status:e}),document.getElementById("remind").style.opacity=0},children:"Go Offline"})]}),Object(a.jsx)("form",{className:"app__form",children:Object(a.jsxs)(d.a,{className:"app__formControl",children:[Object(a.jsx)("label",{for:"file-input",children:Object(a.jsxs)("div",{className:"app__iconButton",children:[Object(a.jsx)(_.a,{}),Object(a.jsx)("p",{children:"".concat(k," %")}),Object(a.jsx)(y.a,{className:"app__iconButton",disabled:!B,variant:"contained",color:"primary",type:"submit",onClick:function(e){e.preventDefault();var t=function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"pm":"am",s=(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a;return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+"  "+s}(new Date);I.ref("images/".concat(B.name)).put(B).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);L(t)}),(function(e){console.log(e),alert(e.message)}),(function(){I.ref("images").child(B.name).getDownloadURL().then((function(e){N.collection("messages").add({vims:e,username:x,timestamp:f.a.firestore.FieldValue.serverTimestamp(),new_time:t}),L(0),M(null)}))}))},children:Object(a.jsx)(h.a,{})})]})}),Object(a.jsx)("input",{id:"file-input",type:"file",accept:".gif, .png, .jpeg",onChange:function(e){e.target.files[0]&&M(e.target.files[0])},hidden:!0}),Object(a.jsxs)("div",{className:"spacer",children:[Object(a.jsx)(u.a,{onKeyUp:function(e){N.collection("typing").doc(x).update({state:"Typing"}),clearTimeout(H),H=setTimeout((function(){N.collection("typing").doc(x).update({state:""})}),1e3)},className:"app__Input",placeholder:"Enter a message...",value:n,onChange:function(e){return c(e.target.value)}}),Object(a.jsx)(y.a,{disabled:!n,variant:"contained",color:"primary",type:"submit",onClick:function(e){e.preventDefault();var t=function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"pm":"am",s=(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a;return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+"  "+s}(new Date);N.collection("messages").add({message:n,vims:"",username:x,timestamp:f.a.firestore.FieldValue.serverTimestamp(),new_time:t}),c("")},children:Object(a.jsx)(h.a,{})})]})]})}),Object(a.jsx)(b.a,{children:m.map((function(e){var t=e.id,n=e.message,s=e.vims,c=e.new_time;return Object(a.jsx)(p,{message:n,vims:s,username:x,new_time:c},t)}))})]})}var C=function(){var e=Object(E.a)(w),t=Object(r.a)(e,1)[0];return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{children:Object(a.jsx)(B,{})}),Object(a.jsx)("section",{children:t?Object(a.jsx)(M,{}):Object(a.jsx)(T,{})})]})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(C,{className:"wonder"})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.abb9df96.chunk.js.map